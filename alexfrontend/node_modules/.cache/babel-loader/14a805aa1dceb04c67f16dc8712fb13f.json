{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Xeono\\\\Documents\\\\GitHub\\\\wciw\\\\alexfrontend\\\\src\\\\Home.js\";\nimport React, { PureComponent } from \"react\";\nimport Header from \"./Header\";\nimport SearchInput from \"./SearchInput\";\nimport MovieResults from \"./MovieResults\";\nimport sample from \"./sample.json\";\nimport Menu from \"./Menu.js\";\nimport { browserHistory } from \"react-router-dom\";\nimport \"./Home.css\";\n\nfunction getQuery() {\n  var params = new URLSearchParams(window.location.search);\n  console.log(window.location.href);\n\n  if (params.has('q')) {\n    console.log(\"something is working\");\n    return params.get('q');\n  }\n\n  return '';\n}\n\nfunction fmap(callback) {\n  return this.reduce((accum, ...args) => {\n    let x = callback(...args);\n\n    if (x !== undefined) {\n      accum.push(x);\n    }\n\n    return accum;\n  }, []);\n}\n\nexport default class Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSearchChange = event => {\n      if (event.key == 'Enter') {\n        //this.setState({movieData: getMovieData(event.target.value)});\n        browserHistory.push(\"?q=\" + event.target.value);\n      }\n    };\n\n    var param = getQuery();\n    this.state = {\n      movieData: [],\n      q: param\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.q === \"\") {} else {\n      const url = 'http://10.37.253.172:3000/api/search/movie/' + this.state.q + \"?precision=fuzzy\";\n      const proxyurl = 'https://cors-anywhere.herokuapp.com/'; //let response = await fetch(url)\n      //let data = await response.json()\n\n      var data = sample; //fetch(url)\n      //.then(response => response.json())\n      //.then(data=> {\n\n      var result = data.map(movie => ({\n        poster: movie.poster_small,\n        title: movie.title,\n        websites: movie.free_web_sources.map(item => ({\n          link: item.link,\n          name: item.display_name.toLowerCase(),\n          type: \"free\"\n        })).concat(movie.subscription_web_sources.map(item => ({\n          link: item.link,\n          name: item.display_name.toLowerCase(),\n          type: \"Sub\"\n        }))),\n        purchase: fmap.call(movie.purchase_web_sources, item => item.formats.length > 0 ? {\n          link: item.link,\n          name: item.display_name.toLowerCase(),\n          type: \"$\" + item.formats[0].price //we need a price\n\n        } : undefined)\n      }));\n      this.setState({\n        movieData: result\n      }); //}).catch( console.log(\"could not connect to server\"));\n    }\n  }\n\n  render() {\n    if (this.state.q === \"\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        style: {\n          position: 'absolute',\n          top: '50%',\n          width: '100%',\n          transform: 'translateY(-50%)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(SearchInput, {\n        textChange: this.handleSearchChange,\n        initialText: this.state.q,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(SearchInput, {\n      textChange: this.handleSearchChange,\n      initialText: this.state.q,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(MovieResults, {\n      movieData: this.state.movieData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Xeono/Documents/GitHub/wciw/alexfrontend/src/Home.js"],"names":["React","PureComponent","Header","SearchInput","MovieResults","sample","Menu","browserHistory","getQuery","params","URLSearchParams","window","location","search","console","log","href","has","get","fmap","callback","reduce","accum","args","x","undefined","push","Home","Component","constructor","props","handleSearchChange","event","key","target","value","param","state","movieData","q","componentDidMount","url","proxyurl","data","result","map","movie","poster","poster_small","title","websites","free_web_sources","item","link","name","display_name","toLowerCase","type","concat","subscription_web_sources","purchase","call","purchase_web_sources","formats","length","price","setState","render","position","top","width","transform"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport Header from \"./Header\";\r\nimport SearchInput from \"./SearchInput\";\r\nimport MovieResults from \"./MovieResults\";\r\nimport sample from \"./sample.json\";\r\nimport Menu from \"./Menu.js\"\r\nimport {browserHistory} from \"react-router-dom\";\r\n\r\nimport \"./Home.css\"\r\nfunction getQuery(){\r\n\tvar params = new URLSearchParams(window.location.search)\r\n\tconsole.log(window.location.href)\r\n\tif(params.has('q'))  {\r\n\t\tconsole.log(\"something is working\");\r\n\t\treturn params.get('q');\r\n\t}\r\n\treturn ''\r\n}\r\n\r\nfunction fmap(callback) {\r\n    return this.reduce((accum, ...args) => {\r\n        let x = callback(...args);\r\n        if(x !== undefined) {\r\n            accum.push(x);\r\n        }\r\n        return accum;\r\n    }, []);\r\n}\r\n\r\n\r\n\r\nexport default class Home extends React.Component {\r\n\t\r\n  \r\n  \r\n  constructor(props) {\r\n    super(props);\r\n\t\r\n\tvar param = getQuery();\r\n\r\n    this.state = {\r\n      movieData: [],\r\n\t  q: param,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n\t  if(this.state.q === \"\")\r\n\t\t{\r\n\t\t\r\n\t\t} else {\r\n\t    const url = 'http://10.37.253.172:3000/api/search/movie/' + this.state.q + \"?precision=fuzzy\";\r\n\t\tconst proxyurl = 'https://cors-anywhere.herokuapp.com/'\r\n\t\t//let response = await fetch(url)\r\n\t\t//let data = await response.json()\r\n\t\t   \r\n\t\tvar data = sample;\r\n\t\t//fetch(url)\r\n\t\t//.then(response => response.json())\r\n\t\t//.then(data=> {\r\n\t\t   var result = data.map(movie => (\r\n\t\t   {\r\n\t\t       poster: movie.poster_small,\r\n\t\t\t   title: movie.title,\r\n\t\t\t   websites: (movie.free_web_sources.map( (item) => (\r\n\t\t\t\t  { \r\n\t\t\t        link: item.link,\r\n\t\t\t        name: item.display_name.toLowerCase(), \r\n\t\t\t        type: \"free\"\r\n\t\t\t      }\r\n\t\t\t\t\t)).concat (\r\n\t\t\t\t\tmovie.subscription_web_sources.map( (item) => (\r\n\t\t\t\t\t  { \r\n\t\t\t\t\t\tlink: item.link,\r\n\t\t\t\t\t\tname: item.display_name.toLowerCase(), \r\n\t\t\t\t\t\ttype: \"Sub\"\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t)))),\r\n\t\t\t    purchase: (fmap.call(movie.purchase_web_sources, item => item.formats.length > 0 ?  \r\n\t\t\t    { \r\n\t\t\t     link: item.link,\r\n\t\t\t     name: item.display_name.toLowerCase(), \r\n\t\t\t     type: \"$\" + item.formats[0].price //we need a price\r\n\t\t\t    } : undefined))\r\n\t\t   }));\r\n\t\t   this.setState({movieData:result}); \r\n\t\t//}).catch( console.log(\"could not connect to server\"));\r\n        }\r\n  }\r\n  \r\n  handleSearchChange = (event) => \r\n  {\r\n\t  if(event.key == 'Enter') {\r\n\t\t  //this.setState({movieData: getMovieData(event.target.value)});\r\n\t\t  browserHistory.push( \"?q=\" + event.target.value );\r\n\t\t\r\n\t  }\t  \r\n  };\r\n  \r\n  render() {\r\n\tif(this.state.q === \"\")\r\n\t{\r\n\t\treturn (\r\n\t\t<div>\r\n\t\t\t<div className='App' style={{position: 'absolute',\r\n\t\t\t\t\t\ttop: '50%',\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\ttransform: 'translateY(-50%)'}}>\r\n\t\t\t  <Header />\r\n\t\t\t  <SearchInput textChange={this.handleSearchChange} initialText={this.state.q} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t  );\r\n\t}\r\n\treturn (\r\n\t<div>\r\n\t\t  <div className='App'>\r\n\t\t\t<Header />\r\n\t\t\t<SearchInput textChange={this.handleSearchChange} initialText={this.state.q} />\r\n\t\t\t<MovieResults movieData={this.state.movieData} />\r\n\t\t  </div>\r\n\t  </div>\r\n\t);\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}